---
description: TV Minder project structure and conventions
alwaysApply: true
---

# TV Minder Project

A TV show tracking app with React frontend and Express API.

## Monorepo Structure

- `front/` - React frontend (Vite, Chakra UI v3, Redux Toolkit)
- `api/` - Express API (MongoDB/Mongoose, JWT auth)

## Frontend Conventions

### Imports

Use the `~/` alias for absolute imports:

```tsx
import { useAppSelector } from '~/store';
import { ROUTES } from '~/app/routes';
```

### State Management

- Redux Toolkit with RTK Query for API calls
- RTK Query is used across the app except `store/tv/` which is legacy Redux interacting with the TMDB API
- Use typed hooks: `useAppSelector`, `useAppDispatch`
- Selectors in `store/tv/selectors.ts`

### Routing

Uses **wouter** (not react-router):

```tsx
import { useLocation } from 'wouter';
import { Link } from 'wouter';
```

### Feature Structure

Features organized in `features/` folder:

- `calendar/` - Calendar view
- `following/` - User's followed shows
- `search/` - Search functionality
- `show/` - Show details page
- `header/`, `footer/` - Layout components

### Hooks

Custom hooks in `hooks/`:

- `useIsMobile()` - Responsive breakpoint
- `useImageUrl()` - TMDB image URLs with placeholder
- `useNavigateToShow()` - Navigate with view transitions

### Testing

- Unit: Vitest + Testing Library
- E2E: Playwright

### Validation

- After changing more than 10 lines of code, run `npm run validate`
- If it fails, fix the TypeScript/Eslint error(s) before continuing
- You can also run `npm run lint:fix` to automatically fix some of the linting errors.

### Components

- When defining a React component props type, name it `Props` (not `ComponentNameProps`)

### React Conventions

- Don't use useCallback or useMemo unless there's a very good reason to memoize.
- Always use braces for component function bodies, even for single-expression returns. This makes future refactoring cleaner with minimal diffs.

```tsx
// ✅ Good - uses braces
export const MyComponent = () => {
  return <div>Hello</div>;
};

// ❌ Bad - direct return
export const MyComponent = () => <div>Hello</div>;
```

### Comments

- IMPORTANT: do not add comments to the code unless the code is very complex or difficult to understand

### Testing

Primarily we use e2e tests which can be run with `npm run test:e2e`. Do this
only when explictly asked to. It should connect to the already running local
web server on port 4000 without needing to start it again.

### Syntax

Use double bangs for boolean values instead of Boolean keyword.

```tsx
// ✅ Good
const value = !!value;
```

```tsx
// ❌ Bad
const value = Boolean(value);
```

### Date and Time

Use dayjs for date and time manipulation.

```tsx
// ✅ Good
const date = dayjs(date);
```

```tsx
// ❌ Bad
const date = new Date(date);
```
